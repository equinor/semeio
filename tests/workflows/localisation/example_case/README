## Directory for Test Case for Non-Adaptive Localisation (`LOCALISATION_JOB`)
​
### Main Components:
​
- **ERT config file:** `sim_field.ert`
​
  The ERT model depends on:
  - `scripts/sim_fields.py`
  - `scripts/common_functions.py`
​
​
- **ERT Keyword Input:**
  - **GRID:** Input grid is made by `scripts/make_reference_data.py`
  - **OBS_CONFIG:** Observations are extracted from an upscaled realization made by `scripts/make_reference_data.py`
  - **GEN_DATA:** Prediction of observables made by forward model `SIM_FIELD` which runs `scripts/sim_fields.py`
  - **FIELD:** Prior realizations of field made by forward model `SIM_FIELD` which runs `scripts/sim_fields.py`
​
- **Other ERT Input Files:**
  - `localisation.wf`
​
- **Other Files:**
  - `randomseeds.txt`: Not used by ERT, but by `sim_fields.py`. This file can be generated by `scripts/make_reference_data.py`
  - `UpscaledGrid.EGRID`: Not used by ERT, but by `sim_fields.py`. This file can be generated by `scripts/make_reference_data.py`
​
### Typical Workflow:
​
- **Preparation to create reference data:**
  - Prepare ERT config input by running `scripts/make_reference_data.py`.
  - The preparation step is **only necessary** if the reference data need to be updated.
  - QC manually the created reference data (GRDECL files to appear in the init_files directory).
  - The created reference data should be checked into git if they are modified.
  - The reference data is used to check the results from running pytest on test_full.py

​- **Run the pytest on test_full.py**
  - The test script will run through a number of cases and compare a selected realization with the reference.

- **How to modify the test:**
  - To modify the test, edit the template file for the ERT configuration file
  - Edit the alternative parameter settings in the file common_function.py
  - Run the script scripts/make_reference_data.py
  - QC manually the created reference data files
  - Add the new reference files to git

### What the Script `sim_fields.py` Does:
1. It must be installed as a FORWARD model in ERT. This is done in the ERT config template file.
​1. Requires 4 input arguments: iteration number, realization_number, config file , config path
1. Get iteration and realisation number from ERT.
2. If iteration = 0, then:
     - Simulate field and export to file to be used in `FIELD` keyword in ERT config file.
     - Upscale field and optionally export to file for QC purpose.
   Else:
     - Import updated field from ERT.
     - Upscale field and optionally export file for QC purpose.
3. Extract predicted values of observables from upscaled field (values for selected grid cells related to the upscaled grid) and write `GEN_DATA` files.
4. Optionally write some files for QC purpose.Directory for test case for non-adaptive localisation (LOCALISATION_JOB)
