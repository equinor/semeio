## Directory for Test Case for Non-Adaptive Localisation (`LOCALISATION_JOB`)
​
### Main Components:
​
- **ERT config file:** `sim_field.ert`
​
  The ERT model depends on:
  - `scripts/sim_fields.py`
  - `scripts/common_functions.py`
​
​
- **ERT Keyword Input:**
  - **GRID:** Input grid is made by `scripts/init_test_case.py`
  - **OBS_CONFIG:** Observations are extracted from an upscaled realization made by `scripts/init_test_case.py`
  - **GEN_DATA:** Prediction of observables made by forward model `SIM_FIELD` which runs `scripts/sim_fields.py`
  - **FIELD:** Prior realizations of field made by forward model `SIM_FIELD` which runs `scripts/sim_fields.py`
​
- **Other ERT Input Files:**
  - `time_map.txt`
  - `localisation.wf`
​
- **Other Files:**
  - `randomseeds.txt`: Not used by ERT, but by `sim_fields.py`. This file can be generated by `scripts/init_test_case.py`
  - `UpscaledGrid.EGRID`: Not used by ERT, but by `sim_fields.py`. This file can be generated by `scripts/init_test_case.py`
​
### Typical Workflow:
​
1. **Preparation:** Prepare ERT config input by running `scripts/init_test_case.py`.
2. Directories for observations are created automatically according to the default settings.
3. Activate or deactivate localisation in ERT config file (`HOOK_WORKFLOW LOAD_WORKFLOW` for localisation).
4. Now ready to run ERT.
​
### What the Script `sim_fields.py` Does:
​
1. Get iteration and realisation number from ERT using ERT environment variables `_ERT_ITERATION_NUMBER` and `_ERT_REALIZATION_NUMBER`. If running with an old Komodo version, the script will require iteration and realisation_number as command line input.
2. If iteration = 0, then:
     - Simulate field and export to file to be used in `FIELD` keyword in ERT config file.
     - Upscale field and optionally export to file for QC purpose.
   Else:
     - Import updated field from ERT.
     - Upscale field and optionally export file for QC purpose.
3. Extract predicted values of observables from upscaled field (values for selected grid cells related to the upscaled grid) and write `GEN_DATA` files.
4. Optionally write some files for QC purpose.Directory for test case for non-adaptive localisation (LOCALISATION_JOB)
